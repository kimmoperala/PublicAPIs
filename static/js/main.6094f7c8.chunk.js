(this.webpackJsonppyorat=this.webpackJsonppyorat||[]).push([[0],{19:function(e,t,a){e.exports=a(27)},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),i=a.n(r),o=a(7),s=a(8),u=a(12),c=a(10),m=a(9),p=a(30),h=a(31),d=a(29),E=a(32),g=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=[this.props.station.lat,this.props.station.lon];return l.a.createElement(p.a,{center:e,zoom:this.props.zoom},l.a.createElement(h.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.a.createElement(d.a,{position:e},l.a.createElement(E.a,null,this.props.station.name,l.a.createElement("br",null),"Vapaita py\xf6ri\xe4: ",this.props.station.bikesAvailable)))}}]),a}(l.a.Component),b=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={weather:"",isLoaded:!1,date:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new Date;t=t.toLocaleString(),fetch("https://api.openweathermap.org/data/2.5/weather?q=Helsinki&units=metric&appid=114332134ea7ed53cb7a0e88a863eb5d&lang=fi",{}).then((function(e){return e.json()})).then((function(a){e.setState({weather:a,isLoaded:!0,date:t}),console.log("response ",a)})).catch((function(e){console.log("Error happened: ",e)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.weather,n=e.date;if(t){var r,i,o,s,u=Number(a.main.temp.toFixed(1)),c=Number(a.main.feels_like.toFixed(1)),m=new Date(1e3*a.sys.sunrise),p=new Date(1e3*a.sys.sunset);return r=m.getMinutes()<10?"0"+m.getMinutes():m.getMinutes(),o=m.getHours()<10?"0"+m.getHours():m.getHours(),m=o+":"+r,i=p.getMinutes()<10?"0"+p.getMinutes():p.getMinutes(),s=p.getHours()<10?"0"+p.getHours():p.getHours(),p=s+":"+i,l.a.createElement("div",{className:"weather-box"},l.a.createElement("h3",null,"S\xe4\xe4 ",a.name),l.a.createElement("img",{alt:"s\xe4\xe4tilan kuva",src:"http://openweathermap.org/img/wn/".concat(a.weather[0].icon,"@2x.png")}),l.a.createElement("h2",{className:"temperature-number"},u,"\xb0C"),a.weather[0].description,l.a.createElement("p",null,n),l.a.createElement("table",{className:"weather-table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Tuuli"),l.a.createElement("td",null,a.wind.speed," m/s")),l.a.createElement("tr",null,l.a.createElement("th",null,"tuntuu kuin"),l.a.createElement("td",null,c,"\xb0C")),l.a.createElement("tr",null,l.a.createElement("th",null,"Ilmankosteus"),l.a.createElement("td",null," ",a.main.humidity," %")),l.a.createElement("tr",null,l.a.createElement("th",null,"Pilvisyys"),l.a.createElement("td",null," ",a.clouds.all," %")),l.a.createElement("tr",null,l.a.createElement("th",null,"Auringonnousu"),l.a.createElement("td",null,m)),l.a.createElement("tr",null,l.a.createElement("th",null,"Auringonlasku"),l.a.createElement("td",null,p)))))}return l.a.createElement("p",null,"Lataa s\xe4\xe4t\xe4")}}]),a}(l.a.Component),f=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={items:[],isLoaded:!1,station:{lat:60.168,lon:24.942},zoom:14},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=JSON.parse(e.target.value);this.setState({station:t})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{\n          bikeRentalStations {\n                    stationId\n                    name\n                    bikesAvailable\n                    spacesAvailable\n                    lat\n                    lon\n                    allowDropoff\n                    }\n        }"}),json:!0}).then((function(e){return e.json()})).then((function(t){e.setState({items:t.data.bikeRentalStations,isLoaded:!0})}))}},{key:"render",value:function(){var e,t=this.state,a=t.isLoaded,n=t.items,r=t.station;return a?(e=60.168===r.lat?l.a.createElement("p",null,l.a.createElement("br",null)):l.a.createElement("p",null,r.name,", vapaita py\xf6ri\xe4: ",r.bikesAvailable,", vapaita py\xf6r\xe4paikkoja: ",r.spacesAvailable),l.a.createElement(l.a.Fragment,null,l.a.createElement("select",{onChange:this.handleChange},l.a.createElement("option",{hidden:!0},"Valitse asema"),n.map((function(e){return l.a.createElement("option",{key:e.stationId,value:JSON.stringify(e)},e.name)}))),e,l.a.createElement(g,this.state),l.a.createElement(b,null))):l.a.createElement("option",null,"Lataa...")}}]),a}(l.a.Component),v=(a(26),function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"PK-seudun polkupy\xf6r\xe4asemat"),l.a.createElement(f,null))});i.a.render(l.a.createElement(v,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6094f7c8.chunk.js.map